## Балансировка нагрузки

Когда мы используем горизонтальное масштабирование, то мы должны распределять нагрузку между серверами. Существует несколько методов сделать распределение нагрузки и вот некоторые из них:

- **Рандом** - отправлять запросы на случайный сервер.
- **Round-Robin** - последовательно отправляет запросы на все сервера. С начало в A, потом в B и так по кругу.
- **Fewest Conection** - отправляет запрос на сервер, который на данный момент меньше всего нагружен.

Не существует лучшего метода балансировки, и на практике используются сразу несколько. Но так-же у балансировки нагрузки есть свои проблемы, например сессии. У нас могут быть сессии, которые хранятся на одном сервере, но не на другом. Вот некоторые решения для таких проблем.

- **Sticky sessions** - Когда пользователь посещает сайт, балансировщик нагрузки запоминает на каком сервере его сессия и отправляет его запросы на данный сервер. Пользователь буквально _прилипает_ к серверу. Одна из проблем в том, что есть риск перегрузки сервера из-за количества пользователей на нем.
- **Database sessions** - База данных хранится на отдельном сервере и все сервера имеют доступ к ней. Проблема в том, что это занимает больше времени и нуждается в большей мощности.
- **Client-Side sessions** - Вместо хранения данных на сервере, мы храним их в куках браузера. Проблема заключается в безопасности (подделка куки) и в точности передачи информации.

Так-же как и балансировка нагрузки, данные методы на практике комбинируются.