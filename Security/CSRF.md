## Cross-Site Request Forgery

**Подделка межсайтовых запросов** 

Ранее мы использовали csrf защиту в django, но что будет если не обезопасить наш сайт? Для пример возьмем банк, в котором перейдя на ссылку можно перевести деньги.

Человек может легко создать ссылку, которая сделает такой перевод:

```html
<a href="http://yourbank.com/transfer?to=brian&amt=2800">
    Click Here!
</a> 
```

Эта атака может быть даже более изощренной, чем ссылка. Если URL-адрес помещен в изображение, то доступ к нему будет получен при попытке браузера загрузить изображение:

```html
 <img src="http://yourbank.com/transfer?to=brian&amt=2800"> 
```

Поэтому всякий раз, когда вы создаете приложение, которое может принять некоторое изменение состояния, это должно быть сделано с помощью POST-запроса. Даже если банк требует POST-запрос, скрытые поля формы все равно могут обмануть пользователя и заставить его случайно отправить запрос. Следующая форма даже не ждет, пока пользователь нажмет кнопку мыши; она автоматически отправляет запрос!

```html
<body onload="document.forms[0].submit()">
    <form action="https://yourbank.com/transfer"
    method="post">
        <input type="hidden" name="to" value="brian">
        <input type="hidden" name="amt" value="2800">
        <input type="submit" value="Click Here!">
    </form>
</body>
```

Чтобы предотвратить такие атаки мы должны создавать **CSRF токены** при загрузке страницы и принимать запросы от форм только с проверенными токенами.